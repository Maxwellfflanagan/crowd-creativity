{{extend 'layout.html'}}
<script type="text/javascript" src="{{=URL('static','js/tasks.js')}}"></script>
<script>
    var URL = {};
    URL.addIdea = "{{=URL('tasks','add_idea')}}";
    URL.getIdea = "{{=URL('tasks','get_idea')}}";
    URL.rateIdea = "{{=URL('tasks','rate_idea')}}";
    URL.getFinalID = "{{=URL('tasks','final_id')}}";
    URL.postSurvey = "{{=URL('tasks','post_survey')}}";

    var ENV = {};
    ENV.condition = {{=userCondition}};
    ENV.startTime = "{{=startTime}}";
    ENV.ideationTime = {{=ideationTime}};

</script>

<div class="container">
	<div class="row top-buffer">
		<div class="col-md-12">
			<div class="pop-out">
		        <div class="col-md-12">
		            <p>Your task is to <strong>come up with as many ideas as you can to address the problem below</strong>. Be <strong>as speciﬁc as possible</strong> in your responses.</p>
		            
		            <p>
		                <strong>Problem description:</strong> Mechanical Turk currently lacks a dedicated mobile app for performing HITs on smartphones (iPhone, Androids, etc.) or tablets (e.g., the iPad). Brainstorm features for a mobile app to Mechanical Turk that would improve the worker’s experience when performing HITs on mobile devices. 
		            </p>

		            <p>
		            	<strong>Time left: </strong> <span id="timer">-</span>
		            </p>  
		            <p>P.S.: If you have any issues with the system, try refreshing the page: it will maintain your ideas and the timer in the same place as before.</p>
		            <div id="time-over">
		            	<h2>Congratulations, you're done with ideation!</h2>
		            	
		            	<p>Thank you for your ideas! If you have any ideas left, feel free to keep adding them below. Then, please copy the id presented below--you will need it for the final steps.</p>
		            	
		            	<h3 id="final-id">Your ID: <strong>Loading id...</strong></h3>

		            	<p>There are two things left for you to be done with this task:</p>
		            	<ol>
		            		<li>Fill out this survey (it will open in a new window): <a href="{{=formUrl}}" target="_blank">ideation survey</a></li>
		            		<li>AFTER you finish the survey above, paste the ID above back onto the MTurk HIT.</li>
		            	</ol>
			            
			            <p>That's it. Thank you for your time!</p>
		            </div>
		        </div>
		    </div>
        </div>
    </div>

    <div class="row top-buffer">
    	
        <div class="ideation {{= 'col-md-6' if userCondition != 1 else 'col-md-12' }}"> <!-- class="col-md-12" if condition == c1 -->
            <div class="pop-out">
            	<h2>Ideation</h2>
            	<h3>Submit a new idea</h3>

            	<div>
	                <p>
	                	<textarea id="idea-input" placeholder="Type in your idea in here. Be very specific, and write as many details as possible! Only 1 idea at a time."></textarea>
	                </p>

	                <p>List tags related to your idea (separate each by a comma):</p>
	                <input type="text" name="concepts-input" id="concepts-input" class="bottom-buffer" placeholder="e.g.: tag 1, tag 2, tag 3, ..."/>

	                <button class="btn" id="idea-submit">Post Idea</button>
	            </div>
	            <h3 class="top-separator">Your previous ideas</h3>
	            <ul class="list-group" id="user-ideas">
	                <!-- dynamic list -->
	                {{if ideas:}}
	                    {{for idea in ideas:}}
	                    <li class="list-group-item">
	                        <p>{{=idea.idea.idea}} 
	                        	{{for concept in idea.idea.concept_idea.select():}}
	                        		<span>{{=concept.concept.concept}}</span>
	                        	{{pass}}
	                        </p>
	                    </li>
	                    {{pass}}
	                {{else:}}
	                <li class="list-group-item" id="no-user-idea">
	                    <h4>No ideas have been submitted yet!</h4>
	                    <p>Use the form above to submit an idea</p>
	                </li>
	                {{pass}}
	            </ul>
            </div>
        </div>

        {{if userCondition != 1:}} 
        <div class="tasks col-md-6">
        	<div class="pop-out">
        		<h2>Inspiration</h2>

        		<p id="pretask-instructions">
        		{{if userCondition == 2:}}
        			Need inspiration? Click the button below and you will be presented with a set of others' ideas. Feel free to use them as inspiration: remix them with your own ideas, expand on them, or use them in anyway you'd like!
        		{{elif userCondition > 2:}}
        			Need inspiration? Click the button below and you will be presented with a task that uses ideas generated by other users. Feel free to use them as inspiration: remix them with your own ideas, expand on them, or use them in anyway you'd like!
        		{{pass}}
        		</p>

	        	<div class="toggle prompt">
	        		

	        		<button class="btn" id="inspiration-request">Get inspiration</button>
	        	</div>

	        	<div class="toggle task hidden">
	        		<p id="task-instructions">
		        		{{if userCondition == 2:}}
		        			Feel free to use the ideas below as inspiration: remix them with your own ideas, expand on them, or use them in anyway you'd like!
		        		{{elif userCondition == 4:}}
		        			<strong>Click on the idea that is more closely related to the seed idea, select how closely related they are, and click on the submit button. </strong> After you finish the task, feel free to use them as inspiration: remix them with your own ideas, expand on them, or use them in anyway you'd like! 
		        		{{elif userCondition == 5:}}
		        			Carefully read the ideas presented here. Then, in the texbox below, write an idea that combines those three (or at least two of them) together in some way. Don't feel pressured to represent all ideas equally in your combination: feel free to pick and choose from the ideas to compose your combination.
		        		{{pass}}
	        		</p>

		        	<div id="ideas-panel">
		        		<!-- The ideas are dynamically added here -->
		        	</div>

		        	<input type="hidden" id="idea-id"/>

		        	{{if userCondition == 3:}}
			        	{{'''<h4>How original is this idea?</h4>
			        	<p>Originality: how surprising, novel, unusual, or creative this idea is.</p>
			        	<ul class="horizontal-radial">
			        		<li> Extremely unoriginal <input type="radio" name="originality" value="1"/> </li>
			        		<li> <input type="radio" name="originality" value="2"/> </li>
			        		<li> <input type="radio" name="originality" value="3"/> </li>
			        		<li> <input type="radio" name="originality" value="4"/> </li>
			        		<li> <input type="radio" name="originality" value="5"/> </li>
			        		<li> <input type="radio" name="originality" value="6"/> </li>
			        		<li> <input type="radio" name="originality" value="7"/> Extremely original </li>
			        	</ul>

			        	<h4>How useful is this idea?</h4>
			        	<p>Usefulness: how practical and feasable the idea is if it were to be implemented</p>
			        	<ul class="horizontal-radial">
			        		<li> Extremely useless <input type="radio" name="usefulness" value="1"/> </li>
			        		<li> <input type="radio" name="usefulness" value="2"/> </li>
			        		<li> <input type="radio" name="usefulness" value="3"/> </li>
			        		<li> <input type="radio" name="usefulness" value="4"/> </li>
			        		<li> <input type="radio" name="usefulness" value="5"/> </li>
			        		<li> <input type="radio" name="usefulness" value="6"/> </li>
			        		<li> <input type="radio" name="usefulness" value="7"/> Extremely useful </li>
			        	</ul>'''}}

			        	<button class="btn btn-primary" id="task-submit">Submit rating</button>
			        {{elif userCondition == 4:}}
			        	<!-- <h4>Which idea is more similar to idea #1?</h4>
			        	<ul>
			        		
			        		<li> <input type="radio" name="similarity" id="similarity-2" value="1"/> <label for="similarity-2">Idea #2</label> </li>
			        		<li> <input type="radio" name="similarity" id="similarity-3" value="2"/> <label for="similarity-3">Idea #3</label> </li>
			        	</ul>-->

			        	<h4>How closely related is the chosen idea to the seed?</h4>
			        	<ul class="horizontal-radial">
			        		<li>
			        			<label for="confidence-1">Very unrelated</label> 
			        			<input type="radio" name="confidence" value="1" id="confidence-1"/> 
			        		</li>
			        		<li> <input type="radio" name="confidence" value="2" id="confidence-2"/> </li>
			        		<li>
			        			<input type="radio" name="confidence" value="3" id="confidence-3"/> 
			        			<label for="confidence-3">Very related</label>
			        		</li>
			        	</ul>

			        	<button class="btn" id="task-submit">Submit task</button>
		        	{{elif userCondition == 5:}}
		        		<h4>Combine at least 2 of the ideas above into a new idea</h4><br/>
		        		<textarea id="combination-input" placeholder="Write your combined idea here."></textarea>
		        		<button class="btn" id="task-submit">Submit task</button>
		        	{{else:}}
		        		<button class="btn" id="close-idea">Done</button>
		        	{{pass}}
	        	</div>
	        	<!--
        		<h3 class="top-separator">Your previous tasks</h3>
        		<li class="list-group-item" id="no-user-idea">
                    <h4>You haven't done any tasks yet</h4>
                    <p>To do a task, select one task type from the options above</p>
                </li>
                -->
        	</div>
        </div>
        {{pass}}
    </div>
</div>